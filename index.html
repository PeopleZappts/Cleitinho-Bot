<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Cleitinho ‚Ä¢ Zappts</title>

<style>
/* RESET B√ÅSICO ----------------------------------------------------------- */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:#16172d;font-family:"Segoe UI",Tahoma,sans-serif;color:#111}

/* CAIXA PRINCIPAL ------------------------------------------------------- */
.wrapper{
  display:flex;justify-content:center;align-items:center;height:100%;
}
.chat{
  width:clamp(320px,90vw,420px);
  max-height:clamp(500px,90vh,720px);
  background:#fff;border-radius:18px;display:flex;flex-direction:column;
  box-shadow:0 10px 30px rgba(0,0,0,.35);overflow:hidden;
}

/* CABE√áALHO ------------------------------------------------------------- */
.header{
  display:flex;align-items:center;gap:10px;
  background:#0f122b;color:#fff;padding:14px 20px;
}
.header img{width:38px;height:38px;border-radius:50%}

/* MENSAGENS ------------------------------------------------------------- */
.messages{
  flex:1;overflow-y:auto;padding:18px 16px;scroll-behavior:smooth;
}
.msg{
  max-width:80%;padding:10px 14px;font-size:15px;line-height:1.45;
  border-radius:12px;margin-bottom:10px;word-break:break-word;
}
.user{align-self:flex-end;background:#dcfce7}
.bot{align-self:flex-start;background:#f1f5f9}

/* TYPING ---------------------------------------------------------------- */
.typing{display:flex;gap:4px;margin:2px 0 14px}
.typing span{width:6px;height:6px;background:#999;border-radius:50%;animation:blink 1s infinite}
.typing span:nth-child(2){animation-delay:.15s}
.typing span:nth-child(3){animation-delay:.3s}
@keyframes blink{0%,100%{opacity:.2}50%{opacity:1}}

/* INPUT ----------------------------------------------------------------- */
.input-area{
  display:flex;gap:10px;padding:12px 14px;border-top:1px solid #e5e7eb;
  background:#fff;
}
input[type=text]{
  flex:1;padding:10px 12px;border:1px solid #cbd5e1;border-radius:10px;
  font-size:14px;outline:none;
}
button{
  background:none;border:none;cursor:pointer;display:grid;place-items:center;
}
button svg{width:22px;height:22px;fill:#0f172a;transition:transform .18s}
button:active svg,button:hover svg{transform:scale(1.15)}
</style>
</head>
<body>
<div class="wrapper">
  <div class="chat">
    <!-- topo -->
    <div class="header">
      <img src="https://cdn.jsdelivr.net/gh/zephyo/emoji-assets@main/robots/robot_1f916.png" alt="Cleitinho">
      <strong>Cleitinho</strong>
    </div>

    <!-- mensagens -->
    <div id="box" class="messages"></div>

    <!-- entrada -->
    <div class="input-area">
      <input id="txt" type="text" placeholder="Pergunte algo‚Ä¶">
      <button id="send" aria-label="Enviar">
        <!-- √≠cone seta estilo Duolingo -->
        <svg viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg>
      </button>
    </div>
  </div>
</div>

<!-- sons embutidos base64 (ping minimalista) -->
<audio id="snd-ping" preload="auto">
  <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YREAAAABAQEB" type="audio/wav">
</audio>

<script>
/* --------------------------------------------------------------------- */
/* util: sess√£o -------------------------------------------------------- */
const KEY = 'cleitinho-history'
const $box = document.getElementById('box')
const $txt = document.getElementById('txt')
const $btn = document.getElementById('send')
const $ping = document.getElementById('snd-ping')

const append = (text, who='bot')=>{
  const div = document.createElement('div')
  div.className = 'msg '+who
  div.textContent = text
  $box.append(div)
  $box.lastElementChild.scrollIntoView({behavior:'smooth'})
  if(who==='bot') $ping.play()
  save()
}

const save = ()=> sessionStorage.setItem(KEY,$box.innerHTML)
const restore = ()=>{ const h=sessionStorage.getItem(KEY); if(h)$box.innerHTML=h }
const focus = ()=> $txt.focus()

/* typing dots --------------------------------------------------------- */
let typing
const showDots = ()=>{
  typing=document.createElement('div')
  typing.className='typing'; typing.id='dots'
  typing.innerHTML='<span></span><span></span><span></span>'
  $box.append(typing); typing.scrollIntoView()
}
const hideDots = ()=> typing && typing.remove()

/* envio --------------------------------------------------------------- */
const fakeAPI = q => new Promise(res=>{
  // DEMO - substitua pelo fetch real ao n8n
  setTimeout(()=>res('Recebido: ‚Äú'+q+'‚Äù (resposta demo).'),1200)
})

const send = async ()=>{
  const msg=$txt.value.trim()
  if(!msg) return
  append(msg,'user')
  $txt.value=''; focus()
  showDots()

  try{
    const reply = await fakeAPI(msg)
    hideDots()
    append(reply,'bot')
  }catch(e){
    hideDots()
    append('ü§ñ Ops! Sem rede agora. Vou tentar de novo‚Ä¶','bot')
  }
}

$btn.onclick=send
$txt.addEventListener('keydown',e=>{ if(e.key==='Enter') send() })

/* ready --------------------------------------------------------------- */
restore(); focus()
</script>
</body>
</html>

